{% extends "base.html" %}

{% block content %}
    <h1>REPORTES DEL SISTEMA</h1>

    <div class="nav-links">
        <a href="{{ url_for('inicio_qhc') }}">Inicio</a>
        <a href="{{ url_for('lista_clientes_qhc') }}">Clientes</a>
        <a href="{{ url_for('lista_compras_qhc') }}">Compras</a>
    </div>

    <div class="menu-container" style="display: flex; justify-content: center; gap: 20px; margin-top: 50px; flex-wrap: wrap;">
        
        {% if session.rol == 'admin' %}
        <a href="{{ url_for('reporte_ventas_tiendas') }}" class="menu-item" style="padding: 30px; border: 2px solid #333; border-radius: 10px; background-color: white; text-decoration: none; color: #333; width: 250px;">
            <h3>📊 VENTAS POR TIENDA</h3>
            <p>Total de ventas agrupadas por sucursal</p>
            <small style="color: blue;">(Disponible)</small>
        </a>
        {% else %}
        <div class="menu-item" style="padding: 30px; border: 2px solid #ccc; border-radius: 10px; background-color: #f8f9fa; text-decoration: none; color: #6c757d; width: 250px;">
            <h3>📊 VENTAS POR TIENDA</h3>
            <p>Total de ventas agrupadas por sucursal</p>
            <small style="color: red;">(Solo Admin)</small>
        </div>
        {% endif %}
        
        {% if session.username == 'invitado' and session.rol == 'operator' %}
        <div class="menu-item" style="padding: 30px; border: 2px solid #ff4444; border-radius: 10px; background-color: #ffebee; text-decoration: none; color: #6c757d; width: 250px;">
            <h3>🔒 CLIENTES TOP</h3>
            <p>Top 10 clientes con mayor monto de compras</p>
            <small style="color: #d32f2f; font-weight: bold;">(ACCESO BLOQUEADO)</small>
        </div>
        {% elif session.rol in ['admin', 'operator'] %}
        <a href="{{ url_for('reporte_clientes_top') }}" class="menu-item" style="padding: 30px; border: 2px solid #333; border-radius: 10px; background-color: white; text-decoration: none; color: #333; width: 250px;">
            <h3>👥 CLIENTES TOP</h3>
            <p>Top 10 clientes con mayor monto de compras</p>
            <small style="color: blue;">(Disponible)</small>
        </a>
        {% else %}
        <div class="menu-item" style="padding: 30px; border: 2px solid #ccc; border-radius: 10px; background-color: #f8f9fa; text-decoration: none; color: #6c757d; width: 250px;">
            <h3>👥 CLIENTES TOP</h3>
            <p>Top 10 clientes con mayor monto de compras</p>
            <small style="color: red;">(Acceso restringido)</small>
        </div>
        {% endif %}
        
        {% if session.username == 'invitado' and session.rol == 'operator' %}
        <!-- INVITADO OPERATOR - ACCESO PERMITIDO (EXCLUSIVO) -->
        <a href="{{ url_for('reporte_compras_fechas') }}" class="menu-item" style="padding: 30px; border: 2px solid #28a745; border-radius: 10px; background-color: #d4edda; text-decoration: none; color: #155724; width: 250px;">
            <h3>✅ COMPRAS POR FECHA</h3>
            <p>Compras agrupadas por fecha</p>
            <small style="color: green; font-weight: bold;">(ACCESO ESPECIAL)</small>
        </a>
        {% else %}
        <div class="menu-item" style="padding: 30px; border: 2px solid #ccc; border-radius: 10px; background-color: #f8f9fa; text-decoration: none; color: #6c757d; width: 250px;">
            <h3>📅 COMPRAS POR FECHA</h3>
            <p>Compras agrupadas por fecha</p>
            <small style="color: red;">(Solo usuario invitado)</small>
        </div>
        {% endif %}
        
    </div>

    {% if session.username == 'invitado' and session.rol == 'operator' %}
    <div style="text-align: center; margin: 30px auto; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; max-width: 800px; color: white;">
        <h3 style="margin: 0 0 10px 0;">🎭 Usuario Invitado (Operator)</h3>
        <p style="margin: 5px 0;">✅ <strong>Acceso Especial:</strong> Puedes ver el reporte de Compras por Fecha</p>
        <p style="margin: 5px 0;">🚫 <strong>Bloqueado:</strong> No puedes acceder al reporte de Clientes Top</p>
        <p style="margin: 5px 0;">🚫 <strong>Restringido:</strong> No tienes acceso al reporte de Ventas por Tienda</p>
    </div>
    {% elif session.rol == 'admin' %}
    <div style="text-align: center; margin: 30px auto; padding: 20px; background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border-radius: 10px; max-width: 800px; color: white;">
        <h3 style="margin: 0 0 10px 0;">👑 Administrador</h3>
        <p style="margin: 5px 0;">✅ Tienes acceso completo a todos los reportes del sistema</p>
        <p style="margin: 5px 0;">✅ Puedes ver: Ventas por Tienda y Clientes Top</p>
        <p style="margin: 5px 0;">🚫 El reporte de Compras por Fecha es exclusivo del usuario invitado</p>
    </div>
    {% elif session.rol == 'operator' %}
    <div style="text-align: center; margin: 30px auto; padding: 20px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); border-radius: 10px; max-width: 800px; color: white;">
        <h3 style="margin: 0 0 10px 0;">👨‍💼 Operador</h3>
        <p style="margin: 5px 0;">✅ Tienes acceso al reporte de Clientes Top</p>
        <p style="margin: 5px 0;">🚫 El reporte de Ventas por Tienda es solo para administradores</p>
        <p style="margin: 5px 0;">🚫 El reporte de Compras por Fecha es exclusivo del usuario invitado</p>
    </div>
    {% endif %}

    <style>
        .menu-item {
            transition: all 0.3s ease;
            display: block;
        }
        .menu-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
    </style>
{% endblock %}